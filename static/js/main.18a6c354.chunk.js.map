{"version":3,"sources":["App.js","serviceWorker.js","config.js","index.js"],"names":["numberWithCommas","x","toString","replace","layerTypes","fill","line","circle","symbol","raster","alignments","left","center","right","transformRequest","url","hasQuery","indexOf","Chapter","id","theme","title","image","description","classList","currentChapterID","className","src","alt","dangerouslySetInnerHTML","__html","App","props","state","currentChapter","chapters","config","this","mapStart","location","mapboxgl","accessToken","map","Map","container","style","zoom","pitch","bearing","interactive","marker","Marker","setLayerOpacity","layer","layerType","getLayer","type","getLayerPaintType","forEach","prop","setPaintProperty","opacity","showMarkers","setLngLat","addTo","setState","bind","scroller","scrollama","popup","Popup","closeButton","closeOnClick","createSpillInfoPopup","e","getCanvas","cursor","coordinates","features","geometry","slice","ReactDOMServer","renderToStaticMarkup","properties","setHTML","on","setup","step","offset","progress","onStepEnter","response","remove","chapter","find","chap","element","flyTo","onChapterEnter","length","onStepExit","onChapterExit","window","addEventListener","resize","subtitle","byline","ref","el","mapContainer","alignment","key","footer","Component","Boolean","hostname","match","mapAnimation","speed","duratiion","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.18a6c354.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport \"./App.css\";\nimport mapboxgl from \"mapbox-gl\";\nimport scrollama from \"scrollama\";\n\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nconst layerTypes = {\n  fill: [\"fill-opacity\"],\n  line: [\"line-opacity\"],\n  circle: [\"circle-opacity\", \"circle-stroke-opacity\"],\n  symbol: [\"icon-opacity\", \"text-opacity\"],\n  raster: [\"raster-opacity\"],\n  \"fill-extrusion\": [\"fill-extrusion-opacity\"],\n};\n\nconst alignments = {\n  left: \"lefty\",\n  center: \"centered\",\n  right: \"righty\",\n};\n\nconst transformRequest = (url) => {\n  const hasQuery = url.indexOf(\"?\") !== -1;\n  const suffix = hasQuery\n    ? \"&pluginName=journalismScrollytelling\"\n    : \"?pluginName=journalismScrollytelling\";\n  return {\n    url: url + suffix,\n  };\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentChapter: props.chapters[0],\n    };\n    // this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    const config = this.props;\n    const mapStart = config.chapters[0].location;\n\n    mapboxgl.accessToken = config.accessToken;\n\n    const map = new mapboxgl.Map({\n      container: \"map\",\n      style: config.style,\n      center: mapStart.center,\n      zoom: mapStart.zoom,\n      pitch: mapStart.pitch,\n      bearing: mapStart.bearing,\n      transformRequest: transformRequest,\n      interactive: false,\n    });\n\n    const marker = new mapboxgl.Marker();\n    if (config.showMarkers) {\n      marker.setLngLat(mapStart.center).addTo(map);\n    }\n\n    function getLayerPaintType(layer) {\n      var layerType = map.getLayer(layer).type;\n      return layerTypes[layerType];\n    }\n\n    function setLayerOpacity(layer) {\n      var paintProps = getLayerPaintType(layer.layer);\n      paintProps.forEach(function (prop) {\n        map.setPaintProperty(layer.layer, prop, layer.opacity);\n      });\n    }\n\n    const setState = this.setState.bind(this);\n\n    // instantiate the scrollama\n    const scroller = scrollama();\n    var popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false,\n    });\n    const createSpillInfoPopup = (e) => {\n      if (this.state.currentChapter.id !== \"spills\") return;\n      // Change the cursor style as a UI indicator.\n      map.getCanvas().style.cursor = \"pointer\";\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      var description = ReactDOMServer.renderToStaticMarkup(\n        <div>\n          {e.features[0].properties[\"Local Datetime\"] ? (\n            <div>{e.features[0].properties[\"Local Datetime\"]}</div>\n          ) : null}\n          {e.features[0].properties[\"Unintentional Release Bbls\"] ? (\n            <div>\n              Barrels Spilled:{\" \"}\n              <b>\n                {numberWithCommas(\n                  e.features[0].properties[\"Unintentional Release Bbls\"]\n                )}\n              </b>\n            </div>\n          ) : null}\n          {e.features[0].properties[\"Est Cost Oper Paid\"] ? (\n            <div>\n              Total Cost:{\" \"}\n              <b>${numberWithCommas(e.features[0].properties[\"Total Cost\"])}</b>\n            </div>\n          ) : null}\n          {e.features[0].properties[\"Est Cost Oper Paid\"] ? (\n            <div>\n              Cost Operator Paid:{\" \"}\n              <b>\n                $\n                {numberWithCommas(\n                  e.features[0].properties[\"Est Cost Oper Paid\"]\n                )}\n              </b>\n            </div>\n          ) : null}\n        </div>\n      );\n      popup.setLngLat(coordinates).setHTML(description).addTo(map);\n    };\n\n    map.on(\"load\", () => {\n      // setup the instance, pass callback functions\n      scroller\n        .setup({\n          step: \".step\",\n          offset: 0.5,\n          progress: true,\n        })\n        .onStepEnter((response) => {\n          popup.remove();\n\n          const chapter = config.chapters.find(\n            (chap) => chap.id === response.element.id\n          );\n          setState({ currentChapter: chapter });\n          map.flyTo(chapter.location);\n          if (config.showMarkers) {\n            marker.setLngLat(chapter.location.center);\n          }\n          if (chapter.onChapterEnter.length > 0) {\n            chapter.onChapterEnter.forEach(setLayerOpacity);\n          }\n        })\n        .onStepExit((response) => {\n          var chapter = config.chapters.find(\n            (chap) => chap.id === response.element.id\n          );\n          if (chapter.onChapterExit.length > 0) {\n            chapter.onChapterExit.forEach(setLayerOpacity);\n          }\n        });\n\n      //Map interaction events\n      map.on(\"mouseenter\", \"spills\", (e) => {\n        createSpillInfoPopup(e);\n      });\n      map.on(\"click\", \"spills\", (e) => {\n        createSpillInfoPopup(e);\n      });\n      map.on(\"mouseleave\", \"spills\", () => {\n        map.getCanvas().style.cursor = \"\";\n        popup.remove();\n      });\n    });\n\n    window.addEventListener(\"resize\", scroller.resize);\n  }\n\n  render() {\n    const config = this.props;\n    const theme = config.theme;\n    const currentChapterID = this.state.currentChapter.id;\n    return (\n      <div>\n        {config.title && (\n          <div id=\"header\" className={theme}>\n            <h1>{config.title}</h1>\n            {config.subtitle && <h2>{config.subtitle}</h2>}\n            {config.byline && <p>{config.byline}</p>}\n            <img\n              src=\"./giniw.jpg\"\n              alt=\"Water Protectors stop construction on Line 3.\"\n            />\n          </div>\n        )}\n        <div ref={(el) => (this.mapContainer = el)} id=\"map\" />\n        <div id=\"story\">\n          <div id=\"features\" className={alignments[config.alignment]}>\n            {config.chapters.map((chapter) => (\n              <Chapter\n                key={chapter.id}\n                theme={theme}\n                {...chapter}\n                currentChapterID={currentChapterID}\n              />\n            ))}\n          </div>\n          {config.footer && (\n            <div id=\"footer\" className={theme}>\n              <p>{config.footer}</p>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction Chapter({ id, theme, title, image, description, currentChapterID }) {\n  const classList = id === currentChapterID ? \"step active\" : \"step\";\n  return (\n    <div id={id} className={classList}>\n      <div className={theme}>\n        {title && <h3 className=\"title\">{title}</h3>}\n        {image && <img src={image} alt={title}></img>}\n\n        {description && (\n          <p dangerouslySetInnerHTML={{ __html: description }}></p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","var config = {\n  style: \"mapbox://styles/shane98c/ckii8dkdt2k8y19qyhtov5dda\",\n  accessToken:\n    \"pk.eyJ1Ijoic2hhbmU5OGMiLCJhIjoiY2o3dzk2anVtMG5hOTMzbzIyZzZja3ZhMyJ9.JdJS0IEbZZ7S6r3Nr87MJg\",\n  showMarkers: false,\n  theme: \"dark\",\n  alignment: \"right\",\n  // use3dTerrain: true,\n  title: \"Line 3 Tar Sands Oil Pipeline\",\n  //   subtitle: \"A descriptive and interesting subtitle to draw in the reader\",\n  //   byline: \"By a Digital Storyteller\",\n  footer:\n    \"Please suggest/submit content, changes, etc to this map to Shane Loeffler shane98c@gmail.com @shane98c\",\n  chapters: [\n    {\n      id: \"tarSands\",\n      title: \"Canadian Tar Sands - the dirtiest fossil fuel\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"Tar sands are mined in Alberta, disrupting pristine ecosystems in order to extract the dirtiest form of fossil fuels. \",\n      mapAnimation: \"easeTo\",\n      location: {\n        center: [-111.56756, 57.325189],\n        zoom: 17,\n        pitch: 0,\n        bearing: 0,\n      },\n      onChapterEnter: [\n        {\n          layer: \"mapbox-satellite\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [],\n    },\n    {\n      id: \"expandTar\",\n      title: \"The science on climate change is clear.\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"The future of our planet and civilization are gravely threatened by the continued extraction of Tar Sands. At this late stage in the fight against climate change, extracting more fossil fuels, especially the dirty and wasteful tar sands of Alberta, is clear science denial.\",\n      location: {\n        center: [-111.556856, 57.311989],\n        zoom: 12,\n        pitch: 60,\n        bearing: 0,\n        speed: 0.2,\n      },\n      onChapterEnter: [\n        {\n          layer: \"mapbox-satellite\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: \"mapbox-satellite\",\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: \"leavingTar\",\n      title: \"Pipelines are used to transport a toxic slurry\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"The economics of tar sands require them to be shipped by pipeline. Arguments about the relative safety of train transport vs pipeline transport are a distraction. If we stop pipeline expansion we stop the expansion of tar sand extraction.\",\n      mapAnimation: \"jumpTo\",\n\n      location: {\n        center: [-100.57581, 49.34759],\n        zoom: 5,\n        pitch: 0,\n        // bearing: 180,\n        // speed: 0.4,\n      },\n      onChapterEnter: [\n        {\n          layer: \"vt-pipeline\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        // {\n        //   layer: \"mapbox-satellite\",\n        //   opacity: 0,\n        // },\n      ],\n    },\n    {\n      id: \"spills\",\n      title: \"Pipelines spill, everytime\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"Just in the last decade of easily accessible data, the scope and cost of pipeline spills is staggering. There are no safe pipelines. \\n \\n \\n Hover over the spill locations for detailed information.\",\n      location: {\n        center: [-97.61394, 38.46505],\n        zoom: 4,\n        pitch: 0,\n        bearing: 0,\n        speed: 0.5,\n      },\n      onChapterEnter: [\n        {\n          layer: \"spills\",\n          opacity: 1,\n        },\n        {\n          layer: \"vt-pipeline\",\n          opacity: 1,\n        },\n        {\n          layer: \"crudeoil-pipelines-us-eia\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: \"spills\",\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: \"Existing\",\n      title: \"Line 3 is pitched as a replacement project\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"That's a lie. It's an expansion project that follows a new route, exposing an entirely new corridor to destruction and inevitable contamination, and significantly increases capacity. On top of that - the oil isn’t even for Minnesota, the risks are. The oil transported, and the energy to do so, is equivalent to <a target='_blank' href='https://www.mepartnership.org/wp-content/uploads/2020/03/Giant-Step-Backward-report-01-29-19-FINAL-online-version-2.pdf'>50 new coal power plants or adding 38 million vehicles to our roads.</a>\",\n      location: {\n        center: [-94, 46.803],\n        zoom: 6,\n        pitch: 0,\n        bearing: 0,\n        speed: 0.5,\n      },\n      onChapterEnter: [\n        {\n          layer: \"vt-pipeline\",\n          opacity: 0,\n        },\n        {\n          layer: \"crudeoil-pipelines-us-eia\",\n          opacity: 0,\n        },\n        {\n          layer: \"l3permroute\",\n          opacity: 1,\n        },\n        {\n          layer: \"l3can\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [],\n    },\n\n    {\n      id: \"water\",\n      title: \"A threat to water\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"So called Minnesota is home to well over 10,000 lakes and countless streams. Line 3 cuts through the heart of the state’s waterways, crossing hundreds of waterbodies, including the Mississippi River, twice. Both construction, and the inevitable spills of toxic crude oil threaten the water quality of not just Minnesota’s pristine waters, but the entire Mississippi River. \",\n      location: {\n        center: [-94, 46.803],\n        zoom: 7,\n        pitch: 0,\n        bearing: 0,\n        speed: 0.5,\n      },\n      onChapterEnter: [\n        {\n          layer: \"l3can\",\n          opacity: 0,\n        },\n        {\n          layer: \"mapbox-satellite\",\n          opacity: 0,\n          duratiion: 2000,\n        },\n        {\n          layer: \"streams\",\n          opacity: [\"interpolate\", [\"linear\"], [\"zoom\"], 6, 0, 9, 1],\n        },\n        {\n          layer: \"treatiesselected\",\n          opacity: 0,\n        },\n        {\n          layer: \"treatiesLine\",\n          opacity: 0,\n        },\n        {\n          layer: \"treatyLabels\",\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [],\n    },\n    {\n      id: \"treaties\",\n      title:\n        \"The construction and inevitable spills will desecrate treaty lands\",\n      // image: \"./tar.jpeg\",\n      description:\n        \"Breaking federal law across four separate treaty agreements.\",\n      location: {\n        center: [-94, 47.803],\n        zoom: 6,\n        pitch: 0,\n        bearing: 0,\n        speed: 0.5,\n      },\n      onChapterEnter: [\n        {\n          layer: \"treatiesselected\",\n          opacity: 1,\n        },\n        {\n          layer: \"treatiesLine\",\n          opacity: 1,\n        },\n        {\n          layer: \"treatyLabels\",\n          opacity: 1,\n        },\n      ],\n      onChapterExit: [\n        {\n          layer: \"spills\",\n          opacity: 0,\n        },\n      ],\n    },\n    {\n      id: \"palisade\",\n      title: \"Waterprotectors are fighting for a future for all of us\",\n      image: \"./lockdown.jpg\",\n      description:\n        \"At the site of one of two locations where the proposed pipeline crosses the Mississippii River.\",\n      location: {\n        center: [-93.365487, 46.873162],\n        zoom: 14.5,\n        pitch: 0,\n        bearing: 0,\n        speed: 1,\n      },\n      onChapterEnter: [\n        {\n          layer: \"l3permroute\",\n          opacity: 1,\n        },\n        {\n          layer: \"mapbox-satellite\",\n          opacity: 1,\n          duratiion: 2000,\n        },\n        {\n          layer: \"streams\",\n          opacity: 0,\n        },\n        {\n          layer: \"treatiesselected\",\n          opacity: 0,\n        },\n        {\n          layer: \"treatiesLine\",\n          opacity: 0,\n        },\n        {\n          layer: \"treatyLabels\",\n          opacity: 0,\n        },\n      ],\n      onChapterExit: [],\n    },\n  ],\n};\n\nexport default config;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport config from './config.js';\n\n\n\nReactDOM.render(<App {...config}/>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}